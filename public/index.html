<html>
<title>ws</title>
<head>
    <script>
        var ws = undefined;
        if ("WebSocket" in window) {
            // Let us open a web socket
            ws = new WebSocket("ws://192.168.43.31:8090"); //good
            ws.onopen = function () {
                console.log('onopen')
                /*   const obj ={
                       idRelai:2,
                       date: Date.now(),
                       event:"beaconData",
                       data:{
                           rssi:-48,
                           iBeacon:{
                               uuid:"2fe5c5b5-078d-45d0-9af3-880301a1e1ca",
                               txPower:10
                           },
                       }
                   };
                   // Web Socket is connected
                   console.info("Connection is opened 2...");

                   ws.send(JSON.stringify(obj));

               */
                /*
                0: 243.0252484541659
            1: -100.34434289972414

            */

            };
            /* ws.onopen = function(e){
                 console.log("cnx ok");
                 ws.send(JSON.stringify({command: "register", userId: 1}));
                 ws.send(JSON.stringify({command: "groupchat", message: "hello glob 2", channel: "global"}));
             }*/

            ws.onmessage = function (evt) {
                var received_msg = evt.data;
                console.log(received_msg);

            };

            ws.onclose = function () {
                // websocket is closed.
                console.error("Connection is closed 2...");
            };
        } else {
            // The browser doesn't support WebSocket
            alert("WebSocket NOT supported by your Browser!");
        }

        var my = 243.0252484541659;
        var mx = -100.34434289972414;

        function eb3et() {

            var posi = {
                "person": 'taher mohammed al amine',
                "room": '1',
                "type": "position",
                "position": {
                    y: my,
                    x: mx
                }
            }
            console.log('sending : ' + posi)
            ws.send(JSON.stringify(posi))
            my = my + 1;
            mx = mx + 2;
        }

        function eb3etRelai(){
            const obj ={
                idRelai:2,
                date: Date.now(),
                event:"beaconData",
                data:{
                    rssi:-60,
                    iBeacon:{
                        uuid:"9e9f04fe-ba6d-5088-1943-36ffb79a8eb1",
                        txPower:-65
                    },
                }
            };

            ws.send(JSON.stringify(obj))


            const obj2 ={
                idRelai:3,
                date: Date.now(),
                event:"beaconData",
                data:{
                    rssi:-43,
                    iBeacon:{
                        uuid:"9e9f04fe-ba6d-5088-1943-36ffb79a8eb1",
                        txPower:-65
                    },
                }
            };

            ws.send(JSON.stringify(obj2))

            const obj3 ={
                idRelai:1,
                date: Date.now(),
                event:"beaconData",
                data:{
                    rssi:-44,
                    iBeacon:{
                        uuid:"9e9f04fe-ba6d-5088-1943-36ffb79a8eb1",
                        txPower:-65
                    },
                }
            };

            ws.send(JSON.stringify(obj3))
        }

        function eb3etHamza(){
            //////////////////////////////////////

            const obj11 ={
                idRelai:2,
                date: Date.now(),
                event:"beaconData",
                data:{
                    rssi:-50,
                    iBeacon:{
                        uuid:"c9c4d054-4fb0-4a1f-8bef-1ed8f99ffe62",
                        txPower:-65
                    },
                }
            };

            ws.send(JSON.stringify(obj11))


            const obj22 ={
                idRelai:3,
                date: Date.now(),
                event:"beaconData",
                data:{
                    rssi:-20,
                    iBeacon:{
                        uuid:"c9c4d054-4fb0-4a1f-8bef-1ed8f99ffe62",
                        txPower:-65
                    },
                }
            };

            ws.send(JSON.stringify(obj22))

            const obj33 ={
                idRelai:1,
                date: Date.now(),
                event:"beaconData",
                data:{
                    rssi:-90,
                    iBeacon:{
                        uuid:"c9c4d054-4fb0-4a1f-8bef-1ed8f99ffe62",
                        txPower:-65
                    },
                }
            };

            ws.send(JSON.stringify(obj33))
        }






        ///////////////////////////////////
    </script>
</head>
<body>


<button onclick="eb3et()"> eb3t position exact</button>
<button onclick="eb3etRelai()">eb3t taki</button>
<button onclick="eb3etHamza()">eb3t hamza</button>



</body>
</html>
